## MVCC 
Multi-Version Concurrency Control,多版本并发控制，用于在数据库管理系统中，实现对数据库的并发访问。
- 当前读
select * lock in share mode, select for update, update, insert, delete 都属于当前读。当前读每次读取的都是数据库中最新的数据。且读取时会锁定当前数据，以保证读到的是最新的结果
- 快照读
不加锁的select就是快照读，不加锁，非阻塞的读。快照读能够提高数据库的并发。快照读基于MVCC实现，在很多情况下，避免了枷锁，降低了开销。因为有多版本，所以当前读到的不一定是最新版本。

如果当前事务隔离级别为串行化，则不存在并发的情况，快照读和当前读读取的结果是一样的，但是效率太低。
如果当前事务隔离级别为读未提交，则每次读取的都是最新的结果。导致脏读、幻读、不可重复读等问题。	

当前读和快照读的区别在于 **是否加锁**

MVCC为每个修改保存一个版本，版本与事务时间戳关联，读操作只读当前事务及事务开始前的数据，使得数据库的写入和读取之间不会互相阻塞，提高了并发，同时可以解决脏读、幻读、不可重复读等问题。
但不能解决更新丢失问题。

在可重复读的隔离级别下，只有在第一次读取时才会生成read-view,此后都是读取的read-view中的内容。如果同时有其他事务对数据进行修改，数据库中也会记录这些修改，但对当前事务不可见。
在读已提交的隔离级别下，每次读取都会重新生成read-view
