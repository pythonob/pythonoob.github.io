#### 索引
一种能够快速检索数据的数据结构
#### 索引数据结构选型
一. 哈希表
- 优点：
	1. 查找到某个指定的值，正常情况下时间复杂度为1
- 缺点：
	1. **哈希碰撞**: 稳定（也是跟哈希碰撞有关系），哈希碰撞严重的值，和没有哈希碰撞的值，时间复杂度相差较大
	2. **不支持范围查询**，不支持排序 哈希后的结果跟原值的大小无关
	3. **不支持模糊匹配** 不会原值A和原值B差不多而生成差不多的哈希值

二. 树
-  二叉查找树BST

   二叉查找树的大小顺序符合中序遍历的特点，左孩子节点比节点本身大，右孩子节点比节点本身小。
   比起遍历全部数据，BST的时间复杂度只有**O(logn)**, 但是实际应用中，经常会使用数据库的自增id作为索引，此时新生成的id总是大于之前的id, 此时二叉查找树就会变成一个只有右孩子的二叉树，查找数据的时间复杂度退化成**O(n)** 
 
- AVL树

  先了解一个概念：**平衡二叉树**
  
  它是一 棵**空树**或它的**左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。**
  AVL树通过AVL算法实现了自平衡，不会出现退化成链表的情况，但它的缺点在于：需要频繁地对树的结构进行调整，以达到平衡状态。在需要频繁插入或删除数据的时候，索引树的结构频繁调整会影响数据操作的响应时间。
-  红黑树

   不严格要求平衡，相对平衡，比起AVL树，调整的次数更少，缺点在于每个节点只能保存一个数据，当数据量较大时，树的高度比较高，查询时间变长
- B树（B-树）

   **特征**
   一个m阶B树满足如下特征：
   1. 根节点至少有两个子女
   2. 每个中间节点包含K-1个元素和k个孩子，其中m/2<=k<=m
   3. 每个叶子节点包含k-1个元素，其中m/2<=k<m
   4. 所有叶子节点位于同一层
   5. 每个节点中元素从小到大排列
   
  （mongodb索引使用了b树）
- B+树

  B+树在B树的基础上，每个中间节点保存的元素个数为k, 且叶子节点包含了全部数据。同时叶子节点上的所有元素，使用双向链表连接起来。
  根节点的最大元素，等同于整个B+树的最大元素。
  卫星数据：指的是索引元素所指向的数据记录，比如数据库中的某一行数据。
  只有聚簇索引中，才直接包含了卫星数据，非聚簇索引中，包含的是指向卫星数据的指针

- B树/B+树比较：
  IO次数：
  B树中所有节点都带有卫星数据。B+树中只有叶子节点含有数据，这样同样大小的页，使用B+树索引的页中，包含更多的节点元素，相同数据量的情况下，B+树比B树更加矮胖，查询时IO次数更少。
  稳定性：
  因为B树中，中间节点也含有数据，所以查询时不一定要查到叶子节点，可能就会查到需要的数据，而B+树每次都要查到叶子节点，才能查到需要的值。
  同样因为B树中间节点含有数据，在进行范围查询时，可能需要向上进行范围查询。而B+树只需要在叶子节点进行范围查询。

参考：[程序员小灰-什么是B+树](https://zhuanlan.zhihu.com/p/54102723 "程序员小灰-什么是B+树")
